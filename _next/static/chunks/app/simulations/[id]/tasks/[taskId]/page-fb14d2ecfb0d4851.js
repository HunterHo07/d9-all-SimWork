(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(5155);a(2115);var r=a(9708),n=a(2085),i=a(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:n,asChild:o=!1,...c}=e,d=o?r.Slot:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...c})}},620:(e,t,a)=>{"use strict";a.d(t,{default:()=>w});var s=a(5155),r=a(2115),n=a(5695),i=a(285),l=a(6695),o=a(5452),c=a(4416),d=a(9434);function u(e){let{...t}=e;return(0,s.jsx)(o.bL,{"data-slot":"dialog",...t})}function m(e){let{...t}=e;return(0,s.jsx)(o.ZL,{"data-slot":"dialog-portal",...t})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(o.hJ,{"data-slot":"dialog-overlay",className:(0,d.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function h(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(m,{"data-slot":"dialog-portal",children:[(0,s.jsx)(x,{}),(0,s.jsxs)(o.UC,{"data-slot":"dialog-content",className:(0,d.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[a,(0,s.jsxs)(o.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(c.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function g(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,d.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,d.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)(o.hE,{"data-slot":"dialog-title",className:(0,d.cn)("text-lg leading-none font-semibold",t),...a})}var b=a(9143),v=a(1123),j=a(6671);function w(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),[a,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[m,x]=(0,r.useState)(!0),[w,y]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1),[S,I]=(0,r.useState)({score:0,message:"",correct:!1}),[F,_]=(0,r.useState)(null),z=(0,r.useRef)(null);(0,r.useEffect)(()=>((async()=>{try{let t=e.id,a=e.taskId,[s,r]=await Promise.all([v.FH.simulations.getById(t),v.FH.tasks.getById(a)]);o(s),d(r),r.timeLimit?_(60*r.timeLimit):_(null)}catch(e){console.error("Error fetching task data:",e),j.oR.error("Failed to load task data")}finally{x(!1)}})(),()=>{z.current&&clearInterval(z.current)}),[e.id,e.taskId]),(0,r.useEffect)(()=>{if(null!==F&&!m)return z.current=setInterval(()=>{_(e=>null===e||e<=0?(z.current&&clearInterval(z.current),0):e-1)},1e3),()=>{z.current&&clearInterval(z.current)}},[F,m]);let B=async()=>{if(c&&a)try{x(!0),await new Promise(e=>setTimeout(e,1500));let e=Math.floor(100*Math.random()),t=e>=70;await v.FH.results.create({simulation:a.id,task:c.id,answer:w,score:e,completed:!0,startTime:new Date(Date.now()-60*(c.timeLimit||0)*1e3+1e3*(F||0)).toISOString(),endTime:new Date().toISOString()}),I({score:e,message:t?"Great job! Your solution demonstrates a good understanding of the concepts.":"Your solution needs some improvement. Consider reviewing the key concepts.",correct:t}),k(!0)}catch(e){console.error("Error submitting answer:",e),j.oR.error("Failed to submit your answer")}finally{x(!1)}};return m?(0,s.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-white/10 border-t-blue-500 animate-spin"})}):c&&a?(0,s.jsx)("div",{className:"min-h-screen bg-black text-white",children:(0,s.jsx)(b.default,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-16",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)(i.$,{variant:"ghost",className:"text-white/70 hover:text-white",onClick:()=>t.push("/simulations/".concat(e.id)),children:"‚Üê Back to Simulation"}),(0,s.jsx)("div",{className:"bg-white/10 px-4 py-2 rounded-full",children:(0,s.jsxs)("span",{className:"font-mono ".concat(F&&F<60?"text-red-500":"text-white"),children:["Time: ",null!==F?(e=>{let t=Math.floor(e/60),a=e%60;return"".concat(t,":").concat(a<10?"0":"").concat(a)})(F):"--:--"]})})]}),(0,s.jsx)(l.Zp,{className:"bg-white/5 border-white/10 mb-8",children:(0,s.jsxs)(l.Wu,{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:c.title}),(0,s.jsxs)("div",{className:"prose prose-invert max-w-none",children:[(0,s.jsx)("p",{children:c.description}),c.instructions?(0,s.jsxs)("div",{className:"mt-4 p-4 bg-white/5 rounded-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Task Instructions:"}),(0,s.jsx)("p",{children:c.instructions})]}):(0,s.jsxs)("div",{className:"mt-4 p-4 bg-white/5 rounded-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Task Instructions:"}),(0,s.jsx)("p",{children:c.description})]})]})]})}),(0,s.jsx)(l.Zp,{className:"bg-white/5 border-white/10 mb-8",children:(0,s.jsxs)(l.Wu,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Your Solution"}),(0,s.jsx)("textarea",{className:"w-full h-64 bg-black/50 border border-white/20 rounded-md p-4 text-white resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your solution here...",value:w,onChange:e=>y(e.target.value),disabled:m}),(0,s.jsx)("div",{className:"mt-4 flex justify-end",children:(0,s.jsx)(i.$,{onClick:B,disabled:m||""===w.trim(),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:m?"Submitting...":"Submit Solution"})})]})}),(0,s.jsx)(u,{open:N,onOpenChange:k,children:(0,s.jsxs)(h,{className:"bg-black/90 border border-white/20 text-white",children:[(0,s.jsx)(g,{children:(0,s.jsx)(p,{className:"text-2xl font-bold",children:S.correct?"Well Done!":"Needs Improvement"})}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,s.jsx)("div",{className:"w-32 h-32 rounded-full flex items-center justify-center bg-gradient-to-br from-blue-500/20 to-purple-600/20 border-4 border-white/10",children:(0,s.jsxs)("span",{className:"text-4xl font-bold",children:[S.score,"%"]})})}),(0,s.jsx)("p",{className:"text-center mb-6",children:S.message}),(0,s.jsxs)("div",{className:"bg-white/5 p-4 rounded-md mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Key Takeaways:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-white/80",children:[(0,s.jsx)("li",{children:"Focus on clear problem definition"}),(0,s.jsx)("li",{children:"Consider edge cases in your solution"}),(0,s.jsx)("li",{children:"Optimize for both readability and performance"})]})]})]}),(0,s.jsx)(f,{children:(0,s.jsx)(i.$,{onClick:()=>{k(!1),t.push("/simulations/".concat(e.id))},className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:"Continue"})})]})})]})})}):(0,s.jsxs)("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"text-white text-2xl mb-4",children:"Task not found"}),(0,s.jsx)(i.$,{onClick:()=>t.push("/simulations/".concat(e.id)),children:"Back to Simulation"})]})}},1123:(e,t,a)=>{"use strict";a.d(t,{FH:()=>i});var s=a(7140);let r=null;function n(){return r||(r=new s.Ay("http://127.0.0.1:8090")),r}let i={auth:{register:async(e,t,a,s)=>{let r=n();return await r.collection("users").create({email:e,password:t,passwordConfirm:a,name:s})},login:async(e,t)=>{let a=n();return await a.collection("users").authWithPassword(e,t)},logout:()=>{n().authStore.clear()},getUser:async()=>{let e=n();if(e.authStore.isValid){let t=e.authStore.model;if(t)return{id:t.id,email:t.email,name:t.name,avatar:t.avatar,created:t.created,updated:t.updated}}return null}},roles:{getAll:async()=>{let e=n();return await e.collection("roles").getFullList()},getById:async e=>{let t=n();return await t.collection("roles").getOne(e)}},simulations:{getAll:async()=>{let e=n();return await e.collection("simulations").getFullList({expand:"role"})},getById:async e=>{let t=n();return await t.collection("simulations").getOne(e,{expand:"role"})},getByRole:async e=>{let t=n();return await t.collection("simulations").getFullList({filter:'role = "'.concat(e,'"'),expand:"role"})}},tasks:{getAll:async()=>{let e=n();return await e.collection("tasks").getFullList({expand:"simulation",sort:"order"})},getById:async e=>{let t=n();return await t.collection("tasks").getOne(e,{expand:"simulation"})},getBySimulation:async e=>{let t=n();return await t.collection("tasks").getFullList({filter:'simulation = "'.concat(e,'"'),expand:"simulation",sort:"order"})}},results:{getAll:async()=>{let e=n();return await e.collection("results").getFullList({expand:"user,simulation,task"})},getById:async e=>{let t=n();return await t.collection("results").getOne(e,{expand:"user,simulation,task"})},getByUser:async e=>{let t=n();return await t.collection("results").getFullList({filter:'user = "'.concat(e,'"'),expand:"user,simulation,task"})},create:async e=>{let t=n();return await t.collection("results").create(e)},update:async(e,t)=>{let a=n();return await a.collection("results").update(e,t)}}}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>d});var s=a(5155);a(2115);var r=a(9434);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},8762:(e,t,a)=>{Promise.resolve().then(a.bind(a,620))},9143:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var s=a(5155),r=a(7869);function n(e){let{children:t,delay:a=0,duration:n=.5,className:i="",direction:l="up",distance:o=20}=e;return(0,s.jsx)(r.P.div,{initial:{opacity:0,...(()=>{switch(l){case"up":default:return{y:o};case"down":return{y:-o};case"left":return{x:o};case"right":return{x:-o};case"none":return{}}})()},animate:{opacity:1,x:0,y:0},transition:{duration:n,delay:a,ease:[.25,.1,.25,1]},className:i,children:t})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[869,352,622,671,964,435,441,684,358],()=>t(8762)),_N_E=e.O()}]);